# 6.1. Типы и структура СУБД
- 1). Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.

    Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:
    
    Электронные чеки в json виде  
    - NOSQL MongoDB/Elasticsearch - обе базы документоориентированные и поддерживают JSON  
    
    Склады и автомобильные дороги для логистической компании
    - NOSQL графовые БД, физические объекты соответствуют этой модели: склады-узлы, дороги-ребра.
    
    Генеалогические деревья
    - NOSQL иерархические бД, созданы для создания связей Родитель-Потомок.
    
    Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
    - NOSQL Redis/Memchached - эти БД могут кэшировать данные ввиде ключ-значение.
    
    Отношения клиент-покупка для интернет-магазина
    - SQL реляционные БД - согласованная БД,  фиксированная структура и типы данных.
    
    Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

- 2). 
    Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):
    
    Данные записываются на все узлы с задержкой до часа (асинхронная запись)
    При сетевых сбоях, система может разделиться на 2 раздельных кластера
    Система может не прислать корректный ответ или сбросить соединение

    - AP, обеспечена доступность и распределенность, но нет согласованности данных из-за асинхронности записи.
    - AP, кластеры будут отвечать, но данные в них не будут согласованы.
    - CA, свойственно реляционным БД.
    
    А согласно PACELC-теореме, как бы вы классифицировали данные реализации?
    - PA/EL - обеспечена доступность, без консистентности
    - PA/EL - обеспечена доступность, без консистентности
    - EC/PC - обеспечена лучшая согласованность данных.
	
	
- 3). Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

     Хотя принципы ACID и BASE являются противоположными, на мой взгляд можно применять принципы частично совместно.
     Например, в системе, разработанной по принципу ACID, можно использовать S и E из BASE.
     То есть, для какой-то части данных важна будет быстрая обработка, а для какой-то части данных необязательна 
     онлайн-консистентность(приемлема асинхроность)
    
- 4). Вам дали задачу написать системное решение, основой которого бы послужили:

        - фиксация некоторых значений с временем жизни
        - реакция на истечение таймаута
        Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора данной системы?

    - Redis подходит как решение, т.к. имеет функциональность TimeToLive, а также Pub/Sub.
      
      Реакция на timeout(TimeToLive) - ключ будет удален. Однако, если есть необходимость продолжить
      использовать ключ, то для это есть несколько вариантов:
        - переименовать ключ
        - обновить timeout
        - сделать ключ постоянным(отменить timeout)
        
      Система Pub/Sub состоит из отправителей и получателей сообщений.
      В Redis функционал Pub/Sub не поддерживает очередь сообщений, но тем не менее, сообщения
      буферизируются в Redis output buffer и TCP-socket buffer.  
      
      Т.о. возникают следующие недостатки:
      При медленной работе Подписчика буферы могут переполниться, и в конечном итоге 
      Redis закроет соединение с Подписчиком. 
      Также исходя из условий задачи касательно TimeToLive, при переполнении буферов часть данных в них
      вообще не попадет по истечению timeout.